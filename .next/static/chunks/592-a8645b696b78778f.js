(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[592],{622:function(e,t,n){"use strict";var r=n(2265),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:s,type:e,key:l,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},7437:function(e,t,n){"use strict";e.exports=n(622)},4033:function(e,t,n){e.exports=n(5313)},5566:function(e){var t,n,r,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c=[],l=!1,u=-1;function d(){l&&r&&(l=!1,r.length?c=r.concat(c):u=-1,c.length&&f())}function f(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(r=c,c=[];++u<t;)r&&r[u].run();u=-1,t=c.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}},2635:function(e,t,n){"use strict";n.d(t,{eA:function(){return G},zB:function(){return Y},w7:function(){return q}});var r=n(7437),s=n(2265);class o extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let n=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?" .":""}Read more at ${n}`}}class i extends o{}i.kind="signIn";class a extends o{}a.type="AdapterError";class c extends o{}c.type="AuthorizedCallbackError";class l extends o{}l.type="CallbackRouteError";class u extends o{}u.type="ErrorPageLoop";class d extends o{}d.type="EventError";class f extends o{}f.type="InvalidCallbackUrl";class h extends i{}h.type="CredentialsSignin";class p extends o{}p.type="InvalidEndpoints";class y extends o{}y.type="InvalidCheck";class v extends o{}v.type="JWTSessionError";class w extends o{}w.type="MissingAdapter";class g extends o{}g.type="MissingAdapterMethods";class E extends o{}E.type="MissingAuthorize";class m extends o{}m.type="MissingSecret";class _ extends i{}_.type="OAuthAccountNotLinked";class S extends i{}S.type="OAuthCallbackError";class x extends o{}x.type="OAuthProfileParseError";class T extends o{}T.type="SessionTokenError";class L extends i{}L.type="OAuthSignInError";class b extends i{}b.type="EmailSignInError";class k extends o{}k.type="SignOutError";class R extends o{}R.type="UnknownAction";class U extends o{}U.type="UnsupportedStrategy";class A extends o{}A.type="InvalidProvider";class C extends o{}C.type="UntrustedHost";class $ extends o{}$.type="Verification";class P extends i{}P.type="MissingCSRF";class N extends o{}class O extends o{}async function I(e,t,n,r={}){let s=`${M(t)}/${e}`;try{let e={headers:{"Content-Type":"application/json",...r?.headers?.cookie?{cookie:r.headers.cookie}:{}}};r?.body&&(e.body=JSON.stringify(r.body),e.method="POST");let t=await fetch(s,e),n=await t.json();if(!t.ok)throw n;return n}catch(e){return n.error(new N(e.message,e)),null}}function M(e){return"undefined"==typeof window?`${e.baseUrlServer}${e.basePathServer}`:e.basePath}function j(){return Math.floor(Date.now()/1e3)}function X(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);let n=new URL(e??t),r=("/"===n.pathname?t.pathname:n.pathname).replace(/\/$/,""),s=`${n.origin}${r}`;return{origin:n.origin,host:n.host,path:r,base:s,toString:()=>s}}var H=n(5566);let B={baseUrl:X(H.env.NEXTAUTH_URL??H.env.VERCEL_URL).origin,basePath:X(H.env.NEXTAUTH_URL).path,baseUrlServer:X(H.env.NEXTAUTH_URL_INTERNAL??H.env.NEXTAUTH_URL??H.env.VERCEL_URL).origin,basePathServer:X(H.env.NEXTAUTH_URL_INTERNAL??H.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}};function F(){return"undefined"!=typeof BroadcastChannel?new BroadcastChannel("next-auth"):{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{}}}let W={debug:console.debug,error:console.error,warn:console.warn},z=s.createContext?.(void 0);async function D(e){let t=await I("session",B,W,e);return(e?.broadcast??!0)&&F().postMessage({event:"session",data:{trigger:"getSession"}}),t}async function V(){let e=await I("csrf",B,W);return e?.csrfToken??""}async function J(){return I("providers",B,W)}async function Y(e,t,n){let{callbackUrl:r=window.location.href,redirect:s=!0}=t??{},o=M(B),i=await J();if(!i){window.location.href=`${o}/error`;return}if(!e||!(e in i)){window.location.href=`${o}/signin?${new URLSearchParams({callbackUrl:r})}`;return}let a="credentials"===i[e].type,c="email"===i[e].type,l=`${o}/${a?"callback":"signin"}/${e}`,u=await V(),d=await fetch(`${l}?${new URLSearchParams(n)}`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...t,csrfToken:u,callbackUrl:r})}),f=await d.json();if(s||!(a||c)){let e=f.url??r;window.location.href=e,e.includes("#")&&window.location.reload();return}let h=new URL(f.url).searchParams.get("error");return d.ok&&await B._getSession({event:"storage"}),{error:h,status:d.status,ok:d.ok,url:h?null:f.url}}async function q(e){let{callbackUrl:t=window.location.href}=e??{},n=M(B),r=await V(),s=await fetch(`${n}/signout`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({csrfToken:r,callbackUrl:t})}),o=await s.json();if(F().postMessage({event:"session",data:{trigger:"signout"}}),e?.redirect??!0){let e=o.url??t;window.location.href=e,e.includes("#")&&window.location.reload();return}return await B._getSession({event:"storage"}),o}function G(e){if(!z)throw Error("React Context is unavailable in Server Components");let{children:t,basePath:n,refetchInterval:o,refetchWhenOffline:i}=e;n&&(B.basePath=n);let a=void 0!==e.session;B._lastSync=a?j():0;let[c,l]=s.useState(()=>(a&&(B._session=e.session),e.session)),[u,d]=s.useState(!a);s.useEffect(()=>(B._getSession=async({event:e}={})=>{try{let t="storage"===e;if(t||void 0===B._session){B._lastSync=j(),B._session=await D({broadcast:!t}),l(B._session);return}if(!e||null===B._session||j()<B._lastSync)return;B._lastSync=j(),B._session=await D(),l(B._session)}catch(e){W.error(new O(e.message,e))}finally{d(!1)}},B._getSession(),()=>{B._lastSync=0,B._session=void 0,B._getSession=()=>{}}),[]),s.useEffect(()=>{let e=()=>B._getSession({event:"storage"});return F().addEventListener("message",e),()=>F().removeEventListener("message",e)},[]),s.useEffect(()=>{let{refetchOnWindowFocus:t=!0}=e,n=()=>{t&&"visible"===document.visibilityState&&B._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",n,!1),()=>document.removeEventListener("visibilitychange",n,!1)},[e.refetchOnWindowFocus]);let f=function(){let[e,t]=s.useState("undefined"!=typeof navigator&&navigator.onLine),n=()=>t(!0),r=()=>t(!1);return s.useEffect(()=>(window.addEventListener("online",n),window.addEventListener("offline",r),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}),[]),e}(),h=!1!==i||f;s.useEffect(()=>{if(o&&h){let e=setInterval(()=>{B._session&&B._getSession({event:"poll"})},1e3*o);return()=>clearInterval(e)}},[o,h]);let p=s.useMemo(()=>({data:c,status:u?"loading":c?"authenticated":"unauthenticated",async update(e){if(u||!c)return;d(!0);let t=await I("session",B,W,void 0===e?void 0:{body:{csrfToken:await V(),data:e}});return d(!1),t&&(l(t),F().postMessage({event:"session",data:{trigger:"getSession"}})),t}}),[c,u]);return(0,r.jsx)(z.Provider,{value:p,children:t})}}}]);